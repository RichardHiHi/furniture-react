{"ast":null,"code":"var _jsxFileName = \"/home/thanh/react-course-comfy-sloth-starter/src/context/cart_context.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useEffect, useContext, useReducer } from 'react';\nimport reducer from '../reducers/cart_reducer';\nimport { ADD_TO_CART, REMOVE_CART_ITEM, TOGGLE_CART_ITEM_AMOUNT, CLEAR_CART, COUNT_CART_TOTALS } from '../actions';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst getCart = () => {\n  const cart = localStorage.getItem('cart');\n\n  if (cart) {\n    return JSON.parse(cart);\n  }\n\n  return [];\n};\n\nconst initialState = {\n  cart: getCart(),\n  total: 0,\n  amount: 0,\n  shipping: 345\n};\nconst CartContext = /*#__PURE__*/React.createContext();\nexport const CartProvider = ({\n  children\n}) => {\n  _s();\n\n  const [state, dispatch] = useReducer(reducer, initialState);\n\n  const addToCard = (product, color) => {\n    dispatch({\n      type: ADD_TO_CART,\n      payload: {\n        product,\n        color\n      }\n    });\n  };\n\n  const increase = (id, color) => {\n    let newAmount = 0;\n    const searchCart = state.cart.find(item => {\n      return item.id === id && item.mainColor === color;\n    });\n\n    if (searchCart.amount < searchCart.stock) {\n      newAmount = 1;\n    }\n\n    addToCard({ ...searchCart,\n      amount: newAmount\n    }, color);\n  };\n\n  const decrease = (id, color) => {\n    let newAmount = 0;\n    const searchCart = state.cart.find(item => {\n      return item.id === id && item.mainColor === color;\n    });\n\n    if (searchCart.amount > 1) {\n      newAmount = -1;\n    }\n\n    addToCard({ ...searchCart,\n      amount: newAmount\n    }, color);\n  };\n\n  const clearCart = () => {\n    dispatch({\n      type: CLEAR_CART\n    });\n  };\n\n  const removeItem = (id, color) => {\n    dispatch({\n      type: REMOVE_CART_ITEM,\n      payload: {\n        id,\n        color\n      }\n    });\n  };\n\n  const countTotal = () => {\n    dispatch({\n      type: COUNT_CART_TOTALS\n    });\n  };\n\n  useEffect(() => {\n    localStorage.setItem('cart', JSON.stringify(state.cart));\n    countTotal();\n  }, [state.cart]);\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: { ...state,\n      addToCard,\n      increase,\n      decrease,\n      clearCart,\n      removeItem\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 5\n  }, this);\n}; // make sure use\n\n_s(CartProvider, \"bgCdjuTOmPdSBRwTap80EFd9Y3U=\");\n\n_c = CartProvider;\nexport const useCartContext = () => {\n  _s2();\n\n  return useContext(CartContext);\n};\n\n_s2(useCartContext, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\nvar _c;\n\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"sources":["/home/thanh/react-course-comfy-sloth-starter/src/context/cart_context.js"],"names":["React","useEffect","useContext","useReducer","reducer","ADD_TO_CART","REMOVE_CART_ITEM","TOGGLE_CART_ITEM_AMOUNT","CLEAR_CART","COUNT_CART_TOTALS","getCart","cart","localStorage","getItem","JSON","parse","initialState","total","amount","shipping","CartContext","createContext","CartProvider","children","state","dispatch","addToCard","product","color","type","payload","increase","id","newAmount","searchCart","find","item","mainColor","stock","decrease","clearCart","removeItem","countTotal","setItem","stringify","useCartContext"],"mappings":";;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,UAA3B,EAAuCC,UAAvC,QAAyD,OAAzD;AACA,OAAOC,OAAP,MAAoB,0BAApB;AACA,SACEC,WADF,EAEEC,gBAFF,EAGEC,uBAHF,EAIEC,UAJF,EAKEC,iBALF,QAMO,YANP;;;AAQA,MAAMC,OAAO,GAAG,MAAM;AACpB,QAAMC,IAAI,GAAGC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAb;;AACA,MAAIF,IAAJ,EAAU;AACR,WAAOG,IAAI,CAACC,KAAL,CAAWJ,IAAX,CAAP;AACD;;AACD,SAAO,EAAP;AACD,CAND;;AAQA,MAAMK,YAAY,GAAG;AACnBL,EAAAA,IAAI,EAAED,OAAO,EADM;AAEnBO,EAAAA,KAAK,EAAE,CAFY;AAGnBC,EAAAA,MAAM,EAAE,CAHW;AAInBC,EAAAA,QAAQ,EAAE;AAJS,CAArB;AAOA,MAAMC,WAAW,gBAAGpB,KAAK,CAACqB,aAAN,EAApB;AAEA,OAAO,MAAMC,YAAY,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAkB;AAAA;;AAC5C,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBtB,UAAU,CAACC,OAAD,EAAUY,YAAV,CAApC;;AAEA,QAAMU,SAAS,GAAG,CAACC,OAAD,EAAUC,KAAV,KAAoB;AACpCH,IAAAA,QAAQ,CAAC;AAAEI,MAAAA,IAAI,EAAExB,WAAR;AAAqByB,MAAAA,OAAO,EAAE;AAAEH,QAAAA,OAAF;AAAWC,QAAAA;AAAX;AAA9B,KAAD,CAAR;AACD,GAFD;;AAGA,QAAMG,QAAQ,GAAG,CAACC,EAAD,EAAKJ,KAAL,KAAe;AAC9B,QAAIK,SAAS,GAAG,CAAhB;AACA,UAAMC,UAAU,GAAGV,KAAK,CAACb,IAAN,CAAWwB,IAAX,CAAiBC,IAAD,IAAU;AAC3C,aAAOA,IAAI,CAACJ,EAAL,KAAYA,EAAZ,IAAkBI,IAAI,CAACC,SAAL,KAAmBT,KAA5C;AACD,KAFkB,CAAnB;;AAGA,QAAIM,UAAU,CAAChB,MAAX,GAAoBgB,UAAU,CAACI,KAAnC,EAA0C;AACxCL,MAAAA,SAAS,GAAG,CAAZ;AACD;;AAEDP,IAAAA,SAAS,CAAC,EAAE,GAAGQ,UAAL;AAAiBhB,MAAAA,MAAM,EAAEe;AAAzB,KAAD,EAAuCL,KAAvC,CAAT;AACD,GAVD;;AAWA,QAAMW,QAAQ,GAAG,CAACP,EAAD,EAAKJ,KAAL,KAAe;AAC9B,QAAIK,SAAS,GAAG,CAAhB;AACA,UAAMC,UAAU,GAAGV,KAAK,CAACb,IAAN,CAAWwB,IAAX,CAAiBC,IAAD,IAAU;AAC3C,aAAOA,IAAI,CAACJ,EAAL,KAAYA,EAAZ,IAAkBI,IAAI,CAACC,SAAL,KAAmBT,KAA5C;AACD,KAFkB,CAAnB;;AAGA,QAAIM,UAAU,CAAChB,MAAX,GAAoB,CAAxB,EAA2B;AACzBe,MAAAA,SAAS,GAAG,CAAC,CAAb;AACD;;AAEDP,IAAAA,SAAS,CAAC,EAAE,GAAGQ,UAAL;AAAiBhB,MAAAA,MAAM,EAAEe;AAAzB,KAAD,EAAuCL,KAAvC,CAAT;AACD,GAVD;;AAWA,QAAMY,SAAS,GAAG,MAAM;AACtBf,IAAAA,QAAQ,CAAC;AAAEI,MAAAA,IAAI,EAAErB;AAAR,KAAD,CAAR;AACD,GAFD;;AAGA,QAAMiC,UAAU,GAAG,CAACT,EAAD,EAAKJ,KAAL,KAAe;AAChCH,IAAAA,QAAQ,CAAC;AAAEI,MAAAA,IAAI,EAAEvB,gBAAR;AAA0BwB,MAAAA,OAAO,EAAE;AAAEE,QAAAA,EAAF;AAAMJ,QAAAA;AAAN;AAAnC,KAAD,CAAR;AACD,GAFD;;AAGA,QAAMc,UAAU,GAAG,MAAM;AACvBjB,IAAAA,QAAQ,CAAC;AAAEI,MAAAA,IAAI,EAAEpB;AAAR,KAAD,CAAR;AACD,GAFD;;AAGAR,EAAAA,SAAS,CAAC,MAAM;AACdW,IAAAA,YAAY,CAAC+B,OAAb,CAAqB,MAArB,EAA6B7B,IAAI,CAAC8B,SAAL,CAAepB,KAAK,CAACb,IAArB,CAA7B;AACA+B,IAAAA,UAAU;AACX,GAHQ,EAGN,CAAClB,KAAK,CAACb,IAAP,CAHM,CAAT;AAIA,sBACE,QAAC,WAAD,CAAa,QAAb;AACE,IAAA,KAAK,EAAE,EAAE,GAAGa,KAAL;AAAYE,MAAAA,SAAZ;AAAuBK,MAAAA,QAAvB;AAAiCQ,MAAAA,QAAjC;AAA2CC,MAAAA,SAA3C;AAAsDC,MAAAA;AAAtD,KADT;AAAA,cAGGlB;AAHH;AAAA;AAAA;AAAA;AAAA,UADF;AAOD,CAhDM,C,CAiDP;;GAjDaD,Y;;KAAAA,Y;AAkDb,OAAO,MAAMuB,cAAc,GAAG,MAAM;AAAA;;AAClC,SAAO3C,UAAU,CAACkB,WAAD,CAAjB;AACD,CAFM;;IAAMyB,c","sourcesContent":["import React, { useEffect, useContext, useReducer } from 'react';\nimport reducer from '../reducers/cart_reducer';\nimport {\n  ADD_TO_CART,\n  REMOVE_CART_ITEM,\n  TOGGLE_CART_ITEM_AMOUNT,\n  CLEAR_CART,\n  COUNT_CART_TOTALS,\n} from '../actions';\n\nconst getCart = () => {\n  const cart = localStorage.getItem('cart');\n  if (cart) {\n    return JSON.parse(cart);\n  }\n  return [];\n};\n\nconst initialState = {\n  cart: getCart(),\n  total: 0,\n  amount: 0,\n  shipping: 345,\n};\n\nconst CartContext = React.createContext();\n\nexport const CartProvider = ({ children }) => {\n  const [state, dispatch] = useReducer(reducer, initialState);\n\n  const addToCard = (product, color) => {\n    dispatch({ type: ADD_TO_CART, payload: { product, color } });\n  };\n  const increase = (id, color) => {\n    let newAmount = 0;\n    const searchCart = state.cart.find((item) => {\n      return item.id === id && item.mainColor === color;\n    });\n    if (searchCart.amount < searchCart.stock) {\n      newAmount = 1;\n    }\n\n    addToCard({ ...searchCart, amount: newAmount }, color);\n  };\n  const decrease = (id, color) => {\n    let newAmount = 0;\n    const searchCart = state.cart.find((item) => {\n      return item.id === id && item.mainColor === color;\n    });\n    if (searchCart.amount > 1) {\n      newAmount = -1;\n    }\n\n    addToCard({ ...searchCart, amount: newAmount }, color);\n  };\n  const clearCart = () => {\n    dispatch({ type: CLEAR_CART });\n  };\n  const removeItem = (id, color) => {\n    dispatch({ type: REMOVE_CART_ITEM, payload: { id, color } });\n  };\n  const countTotal = () => {\n    dispatch({ type: COUNT_CART_TOTALS });\n  };\n  useEffect(() => {\n    localStorage.setItem('cart', JSON.stringify(state.cart));\n    countTotal();\n  }, [state.cart]);\n  return (\n    <CartContext.Provider\n      value={{ ...state, addToCard, increase, decrease, clearCart, removeItem }}\n    >\n      {children}\n    </CartContext.Provider>\n  );\n};\n// make sure use\nexport const useCartContext = () => {\n  return useContext(CartContext);\n};\n"]},"metadata":{},"sourceType":"module"}